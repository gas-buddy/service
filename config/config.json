{
  "connections": {
    "repl": {
      "enabled": "env:NETWORK_REPL|b",
      "module": "require:@gasbuddy/service#NetworkedRepl",
      "port": 3002
    },
    "logger": {
      "module": "require:@gasbuddy/configured-winston",
      "addTimestamp": true,
      "addCounter": true,
      "meta": {
        "host": "env:HOSTNAME"
      },
      "transports": {
        "logstash": {
          "module": "require:@gasbuddy/configured-winston-logstash",
          "config": {
            "host": "logstash",
            "port": 9999,
            "label": "servicename:${name}"
          }
        }
      }
    },
    "metadata": {
      "module": "require:@gasbuddy/service#MetadataServer",
      "port": 3001
    },
    "metrics": {
      "module": "require:@gasbuddy/configured-prometheus-client"
    },
    "services": {
      "module": "require:@gasbuddy/configured-swagger-client",
      "defaultTimeout": 20000,
      "specs": {},
      "endpoints": {},
      "options": {
        "basedir": "path:.",
        "preProcessor": "require:@gasbuddy/service#addCorrelationWarning"
      }
    }
  },
  "swaggerApi": {
    "spec": "config:apiSpec",
    "handlers": "sourcepath:handlers",
    "security": {}
  },
  "meddleware": {
    "attachRequest": {
      "module": {
        "name": "@gasbuddy/service",
        "method": "requestFactory"
      },
      "priority": 1
    },
    "static": {
      "priority": 20,
      "enabled": "servicetype:web",
      "module": {
        "name": "serve-static",
        "arguments": [
          "path:./static"
        ]
      }
    },
    "bodyLogger": {
      "enabled": false,
      "module": {
        "name": "@gasbuddy/service",
        "method": "bodyLoggerFactory"
      },
      "priority": 30
    },
    "requestLogger": {
      "module": {
        "name": "@gasbuddy/service",
        "method": "loggerFactory"
      },
      "priority": 40
    },
    "json": {
      "enabled": true,
      "priority": 50,
      "module": {
        "name": "body-parser",
        "method": "json"
      }
    },
    "form": {
      "priority": 50,
      "enabled": "servicetype:web",
      "module": {
        "name": "body-parser",
        "method": "urlencoded",
        "arguments": [
          {
            "extended": true
          }
        ]
      }
    },
    "swaggerApi": {
      "enabled": "servicetype:serv,api",
      "priority": 90,
      "module": {
        "factory": "require:@gasbuddy/configured-swaggerize-express#default",
        "arguments": [
          "config:swaggerApi"
        ]
      }
    },
    "webRoutes": {
      "enabled": "servicetype:web",
      "priority": 100,
      "module": {
        "name": "express-enrouten",
        "arguments": [
          {
            "directory": "sourcepath:routes"
          }
        ]
      }
    },
    "finalHandler": {
      "priority": 999,
      "module": {
        "name": "@gasbuddy/service",
        "method": "finalHandlerFactory"
      }
    }
  }
}